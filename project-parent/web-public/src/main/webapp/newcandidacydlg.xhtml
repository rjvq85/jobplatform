<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
<h:head>
	<meta charset="utf-8" />
	<h:outputScript name="jquery/jquery.js" library="primefaces" />
	<h:outputScript library="js" name="bootstrap.js" />
	<h:outputScript library="js" name="bootstrap-select.js" />
	<h:outputScript library="js" name="customscripts.js" />
	<h:outputStylesheet library="css" name="mainstyle.css" />
	<h:outputStylesheet library="css" name="bootstrap.css" />
</h:head>
<h:body>
	<ui:composition>
		<p:dialog id="newCandidacyDialog" widgetVar="newCandidacyWidget"
			header="Registo" modal="true" resizable="false">
			<h:panelGroup id="newcandidacycontainer" layout="block"
				styleClass="container-small">
				<h:messages id="editglobalmsgsdlg" globalOnly="true"
					infoClass="alert alert-info" errorClass="alert alert-danger"
					warnClass="alert alert-danger" style="list-style-type: none;" />
				<br />
				<h:panelGroup layout="block" styleClass="row">
					<h:panelGroup layout="block" styleClass="col-md-12">
						<h:message for="motivLetter"
							styleClass="glyphicon glyphicon-exclamation-sign" />
						<h:panelGroup layout="block" styleClass="form-group">
							<h:inputTextarea id="motivLetter" value="#{newCandidacy.letter}"
								a:placeholder="Carta de motivação..." styleClass="form-control"
								a:rows="10" />
						</h:panelGroup>
					</h:panelGroup>
				</h:panelGroup>
				<br />
				<h:panelGroup layout="block" class="row">
					<h:panelGroup layout="block" class="col-md-12">
						<h:panelGroup layout="block" class="col-md-offset-3 col-md-6">
							<h:commandButton action="#{newCandidacy.create()}"
								value="Candidatar-se" styleClass="btn btn-info"
								style="width: 45%; border-radius: 0;">
								<p:ajax
									oncomplete="handleCandidacyRequest(xhr, status, args); fadeoutMsg(); fadeoutMsgDlg"
									update=":applydiv :container editglobalmsgsdlg" process="newCandidacyForm" />
							</h:commandButton>
							<h:commandButton action="#" value="Cancelar"
								onclick="PF('newCandidacyWidget').hide(); return false;"
								styleClass="btn btn-default pull-right"
								style="width: 45%; border-radius: 0;" />
						</h:panelGroup>
					</h:panelGroup>
				</h:panelGroup>
			</h:panelGroup>
		</p:dialog>
		<script type="text/javascript">
    		function handleCandidacyRequest(xhr, status, args) {
        		if(!args.submited) {
            		PF('newCandidacyWidget').jq.effect("shake", {times:5}, 100);
        		} else {
            		PF('newCandidacyWidget').hide();
            		location.reload();
        		}
    		}
		</script>
	</ui:composition>
</h:body>
</html>